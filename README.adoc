= Stackable RegoRule Operator

This Kubernetes Operator supports a CRD named `RegoRule`.

Rego is the language used to define policies in the https://www.openpolicyagent.org/[OpenPolicyAgent].

This Operator will watch for new rules and will create a bundle out of all rules in the watched namespace and will make it available via a simple web server under the URL `opa/v1/opa/bundle.tar.gz`.

== Building

This operator is written in Rust.
It is developed against the latest Rust release (1.51 at the time of writing this).

    cargo build --release

== Running

Build it first, the binary will be in `target/release`.

.You can start it like this:
[source]
----
# Defaults
stackable-regorule-operator-server

# Change port for webserver
stackable-regorule-operator-server --port 1234

# Change namespace to watch, if unspecified it'll watch all namespaces
export WATCH_NAMESPACE=foobar
stackable-regorule-operator-server --port 1234
----

